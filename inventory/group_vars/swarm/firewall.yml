---

firewalld_zones:
  - name: cluster
    sources: "{{ groups['swarm'] | difference([inventory_hostname]) | map('extract', hostvars, 'ansible_host') | list }}"

firewall_rules:
  - port: 2377
    zone: cluster
  # https://docs.docker.com/engine/swarm/networking/#firewall-considerations
  - port: 7946
    protocol: tcp
    zone: cluster

  - port: 7946
    protocol: udp
    zone: cluster

  - port: 4789
    protocol: udp
    zone: cluster
