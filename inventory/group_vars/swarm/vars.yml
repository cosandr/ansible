---

jellyfin_port: 8096
mrbot_web_port: 8001

docker_swarm_role: "{{ 'Manager' if groups['swarm'] | ansible.utils.index_of('eq', inventory_hostname) < 3 else 'Worker' }}"
docker_swarm_managers: >-
  {%- set tmp = [] -%}
  {%- for h in groups['swarm'] if hostvars[h].docker_swarm_role == 'Manager' -%}
  {{- tmp.append(h) -}}
  {%- endfor -%}
  {{ tmp }}
docker_registries:
  - url: "{{ gitlab_registry_external_url | regex_replace('^https?://', '') }}"
    username: "{{ vault_gitlab_token_name }}"
    password: "{{ vault_gitlab_token_value }}"

docker_node_labels:
  cpu_tier: "{{ hostvars[vm_host].cpu_tier }}"
  vm_host: "{{ vm_host }}"
