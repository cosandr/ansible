---

host_num: "{{ groups[(host_subnet == 'control_plane') | ternary('talos_cp', 'talos_worker')] | ansible.utils.index_of('eq', inventory_hostname) }}"

__host_ips_3:
  san: "{{ subnets.san.talos | ansible.utils.ipv4 | andrei.utils.ipaddr_concat(groups['talos'] | ansible.utils.index_of('eq', inventory_hostname)) }}"

# https://github.com/siderolabs/talos/releases
talos_version: "1.7.5"
# https://kubernetes.io/releases/
kube_version: "1.29.7"
# https://github.com/cilium/cilium/releases
cilium_version: "1.15.x"
# https://github.com/fluxcd/flux2/releases
# https://github.com/fluxcd-community/helm-charts/releases
flux_version: "~2.13"

# Disabled for now, enable when using vm_pci_devices
# intel_gpu_operator_installed: true
talos_schedule_on_control_plane: true
talos_kubeprism_enabled: true
talos_kubeproxy_enabled: false
kube_proxy_enabled: false
talos_kubeproxy_mode: ipvs

# https://www.talos.dev/v1.7/talos-guides/install/boot-assets/#image-factory
# Contains qemu-guest-agent and i915-ucode
talos_schematic: 90015c0ada3ddd8b55e25342d736bbb1ef7c8e213883ec2ad1110cb44944503f
talos_image: "factory.talos.dev/installer/{{ talos_schematic }}:v{{ talos_version }}"

talos_kubectl_context: "admin@{{ kube_api_server }}"

# Keep disabled for security, I guess
enable_admin_pods: false
