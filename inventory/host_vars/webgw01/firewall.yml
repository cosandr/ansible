---

__firewalld_services_1:
  - name: dns
    zone: internal

__firewall_rules_1:
  # Alertmanager cluster
  - port: "{{ alertmanager_port }}"
    zone: internal
    sources: "{{ subnets.vm.prom + firewall_trusted_sources }}"
  - port: "{{ prometheus_port }}"
    zone: internal
    sources: "{{ subnets.vm.prom }}"
  - port: "{{ alertmanager_peer_port }}"
    protocol: tcp
    zone: internal
    sources: "{{ subnets.vm.prom }}"
  - port: "{{ alertmanager_peer_port }}"
    protocol: udp
    zone: internal
    sources: "{{ subnets.vm.prom }}"

firewalld_rich_rules:
  - zone: public
    rich_rule: 'rule service name="dns" accept limit value="30/s"'
