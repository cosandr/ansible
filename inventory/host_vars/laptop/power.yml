---

user_suspend: |
  Type=oneshot
  Environment=DISPLAY=:0
  Environment=SYSTEMD_SUSPEND=1
  ExecStart=-/usr/bin/playerctl pause
  {% if desktop_environment in ['i3', 'sway'] %}
  # Only lock if not locked already
  ExecStart=/bin/sh -c 'pgrep -u andrei -x my-screenlock || /home/andrei/.local/bin/my-screenlock'
  {% endif %}

logind_config: |
  HandlePowerKey=ignore
  HandleSuspendKey=suspend-then-hibernate
  HandleHibernateKey=hibernate
  HandleLidSwitch=suspend-then-hibernate
  HandleLidSwitchExternalPower=suspend
  HandleLidSwitchDocked=ignore
  HandleRebootKey=ignore

systemd_sleep_config: |
  HibernateDelaySec=48h
