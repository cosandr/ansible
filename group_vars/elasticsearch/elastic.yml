---

es_version: "7.17.0"
__elastic_nodes: "{{ groups['elasticsearch'] | map('extract', hostvars, 'ansible_host') | list }}"
es_heap_size: "{{ (ansible_memtotal_mb * 0.8 / 1000) | int }}g"
es_api_host: "{{ ansible_host }}"
es_enable_auto_ssl_configuration: false
es_config:
  network.host: "{{ ansible_host }}"
  cluster.name: "dres"
  node.name: "{{ inventory_hostname }}"
  cluster.initial_master_nodes: "{{ __elastic_nodes | first }}"
  discovery.seed_hosts: "{{ __elastic_nodes }}"
  http.host: 0.0.0.0
  http.port: 9200
  node.data: true
  node.master: true
  transport.host: 0.0.0.0
  transport.port: 9300
  bootstrap.memory_lock: true

elastic_exporter_port: 9114
elastic_exporter_web_listen_address: ":{{ elastic_exporter_port }}"
elastic_exporter_allow_ips: "{{ node_exporter_allow_ips }}"
elastic_exporter_es_config:
  - es.indices
  - es.node="{{ inventory_hostname }}"
