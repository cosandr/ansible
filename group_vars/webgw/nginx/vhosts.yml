---

__nginx_vhosts_common:
  - filename: gitlab.conf
    server_name: gitlab
    template: "{{ inventory_dir }}/files/webgw/nginx/gitlab.conf.j2"

  - filename: registry.conf
    server_name: registry
    template: "{{ inventory_dir }}/files/webgw/nginx/registry.conf.j2"

  - filename: grafana.conf
    server_name: grafana
    template: "{{ inventory_dir }}/files/webgw/nginx/grafana.conf.j2"

  - filename: nextcloud.conf
    server_name: nextcloud
    template: "{{ inventory_dir }}/files/webgw/nginx/nextcloud.conf.j2"

  - filename: plex.conf
    server_name: plex
    template: "{{ inventory_dir }}/files/webgw/nginx/plex.conf.j2"

__nginx_vhosts_host:
  - filename: nextcloud_ta.conf
    server_name: nextcloud_ta
    upstream_name: nextcloud_ta
    domain: "{{ domains['ti'] }}"
    template: "{{ inventory_dir }}/files/webgw/nginx/nextcloud.conf.j2"

nginx_vhosts: "{{ (__nginx_vhosts_common | default([])) + (__nginx_vhosts_host | default([])) }}"
