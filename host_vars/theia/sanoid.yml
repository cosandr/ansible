---

syncoid_timers:
  - name: rpool
    src: rpool/redhat
    dest: tank/backup/theia/rpool
    oncalendar: Daily
    options:
      - "--recursive"
      - "--no-sync-snap"
      - '--exclude=".*\\/var\\/(cache|log|tmp)"'
      - '--exclude=".*\\/var\\/lib\\/(containers|docker)"'
      - '--exclude="rpool\\/redhat\\/esxi"'

  - name: vm
    src: rpool/redhat/esxi
    dest: tank/backup/truenas/ssd/vm
    oncalendar: Weekly
    options:
      - "--no-sync-snap"

sanoid_timer_minutes: 30

sanoid_backup_modules:
  "rpool/redhat":
    recursive: true
    use_template: "main"

  "rpool/redhat/home":
    recursive: true
    frequently: 6
    hourly: 24
    daily: 5
    monthly: 2
    yearly: 1
    autosnap: true
    autoprune: true

  "rpool/redhat/var/cache":
    use_template: "ignore"

  "rpool/redhat/var/log":
    use_template: "ignore"

  "rpool/redhat/var/tmp":
    use_template: "ignore"

  "rpool/redhat/var/lib/containers":
    use_template: "ignore"

  "rpool/redhat/var/lib/docker":
    use_template: "ignore"

  "tank":
    recursive: true
    process_children_only: true
    use_template: "main"

  "tank/media":
    recursive: true
    use_template: "rare"

  "tank/downloads":
    use_template: "ignore"

  "tank/games":
    use_template: "ignore"

  "tank/yes":
    daily: 3
    monthly: 1
    autosnap: true
    autoprune: true

  "tank/backup/truenas":
    recursive: true
    use_template: "prune_lts"

  "tank/backup/theia":
    recursive: true
    use_template: "prune_lts"

sanoid_backup_templates:
  "main":
    frequently: 0
    hourly: 3
    daily: 5
    monthly: 1
    yearly: 0
    autosnap: true
    autoprune: true

  "rare":
    frequently: 0
    hourly: 1
    daily: 7
    monthly: 3
    yearly: 1
    autosnap: true
    autoprune: true

  "ignore":
    autoprune: false
    autosnap: false
    monitor: false

  "prune_lts":
    autoprune: true
    autosnap: false
    frequently: 0
    hourly: 3
    daily: 10
    monthly: 3
    yearly: 0
