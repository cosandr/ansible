---

pacman_i3_packages:
  - arandr
  - brightnessctl
  - dunst
  - evince
  - feh
  - file-roller
  - gnome-calculator
  - gnome-themes-extra
  - gvfs-mtp
  - gvfs-nfs
  - gvfs-smb
  - i3-gaps
  - lxappearance
  - numlockx
  - pamixer
  - pavucontrol
  - picom
  - playerctl
  - qt5ct
  - redshift
  - rofi
  - scrot
  - thunar
  - thunar-archive-plugin
  - xclip
  - xorg-xev
  - xorg-xinit
  - xorg-xinput
  - xorg-xrandr
  - xorg-xset

aur_i3_packages:
  - adwaita-qt
  - i3lock-color
  - i3lock-fancy-rapid-git
  - polybar

pacman_sway_packages:
  - gammastep
  - grim
  - kanshi
  - slurp
  - sway
  - swaybg
  - swayidle
  - waybar
  - wl-clipboard
  - wofi
  - xdg-desktop-portal-wlr
  - xorg-xwayland

aur_sway_packages:
  - swaylock-effects-git
  - wdisplays

pacman_packages:
  - acpi_call-dkms
  - alacritty
  - alsa-utils
  - ansible
  - ansible-lint
  - autoconf
  - automake
  - base
  - bat
  - binutils
  - bison
  - bluez
  - bluez-utils
  - btrfs-progs
  - deluge-gtk
  - docker
  - docker-compose
  - efibootmgr
  - ethtool
  - fakeroot
  - file
  - findutils
  - firefox
  - firewalld
  - flex
  - fwupd
  - fzf
  - gawk
  - gcc
  - gettext
  - git
  - gnu-netcat
  - go
  - grep
  - groff
  - gzip
  - htop
  - htop
  - inetutils
  - intel-gpu-tools
  - intel-media-driver
  - intel-ucode
  - iotop
  - ipython
  - iwd
  - jq
  - kitty
  - libpulse
  - libtool
  - libva-intel-driver
  - libva-utils
  - linux
  - linux-firmware
  - linux-headers
  - linux-lts
  - linux-lts-headers
  - m4
  - make
  - man-db
  - mesa-demos
  - ncdu
  - net-tools
  - nextcloud-client
  - noto-fonts
  - noto-fonts-emoji
  - ntfs-3g
  - openssh
  - otf-cascadia-code
  - p7zip
  - pacman-contrib
  - pacutils
  - patch
  - pkgconf
  - powertop
  - pyenv
  - python-aiohttp
  - python-jmespath  # ansible json filter
  - python-llfuse    # borg mount
  - python-netaddr   # ansible ip filter
  - python-pip
  - python-websockets
  - reflector
  - remmina
  - sbctl
  - sed
  - smartmontools
  - sof-firmware
  - sshfs
  - sshpass
  - sudo
  - texinfo
  - tmux
  - ttf-fira-code
  - ttf-font-awesome
  - ttf-nerd-fonts-symbols
  - upower
  - usbutils
  - vim
  - vlc
  - which
  - zsh

aur_packages:
  - jetbrains-toolbox
  - kernel-modules-hook
  - paru-bin
  - pyenv-virtualenv
  - shellcheck-bin
  - slack-desktop
  - sublime-text-4
  - teams
  - tmuxinator
  - ttf-font-awesome-4
  - webex-bin
  - zoom

enabled_services:
  - systemd-timesyncd.service
  - firewalld.service
  - bluetooth.service
  - sshd.service

masked_services:
  - systemd-rfkill.service
  - systemd-rfkill.socket

modprobe_config:
  "nobeep.conf": "blacklist pcspkr"


# Update key
# systemd-cryptenroll /dev/nvme0n1p2 --wipe-slot=tpm2
# systemd-cryptenroll --tpm2-device=auto --tpm2-pcrs=0+1+7 /dev/nvme0n1p2

kernel_params: "root=/dev/mapper/root rw rootflags=subvol=@ intel_iommu=on nmi_watchdog=0 resume=/dev/mapper/root resume_offset=941473"

systemd_boot_entries:
  "arch-zen": |
    title Arch Linux (Zen)
    linux /vmlinuz-linux-zen
    initrd /intel-ucode.img
    initrd /initramfs-linux-zen.img
    options {{ kernel_params }}

crypttab: ""

crypttab_initramfs: |
  root    UUID=7dc15fde-8ccd-4752-a24b-194b53b37f28   -   luks,discard,tpm2-device=auto


fstab: |
  /dev/mapper/root    	/.swap    	btrfs     	rw,relatime,compress-force=zstd:3,ssd,space_cache=v2,subvol=/@swap 0 0
  /.swap/swapfile		    none		    swap		    defaults	0 0

# go-check-updates
# git clone https://github.com/cosandr/go-check-updates
# ./setup.sh build pacman
# sudo pacman -U build/go-check-updates-git-v1.0.rc2.r6.g9af655b-1-any.pkg.tar.zst
# sudo systemctl enable --now go-check-updates.socket

sbctl_sign_files:
  - "/boot/vmlinuz-linux"
  - "/boot/vmlinuz-linux-zen"
  - "/boot/EFI/BOOT/BOOTX64.EFI"
  - "/boot/EFI/arch/fwupdx64.efi"
  - "/boot/EFI/systemd/systemd-bootx64.efi"

# ansible_form_factor: Notebook

firewalld_interfaces:
  - zone: public
    interface: wlan0

firewalld_remove_services:
  - zone: public
    service: ssh

firewalld_add_sources:
  - zone: home
    source: "10.0.0.0/24"

kernels:
  - "linux"
  - "linux-lts"

efi_labels:
  linux: "Arch Linux"
  linux-lts: "Arch Linux LTS"

mkinitcpio_no_fallback: "{{ kernels }}"
