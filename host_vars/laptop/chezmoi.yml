---

chezmoi_overrides:
  i3: |
    # Restore based on connected displays
    mon=$(xrandr --query | grep -oP '\S+\s+connected' | cut -d' ' -f1)
    _hour=$(date +%H)
    [[ $_hour -ge 8 && $_hour -lt 17 ]] && workhours=1 || workhours=0
    if [[ $mon =~ DP-3 && $mon =~ HDMI-1 ]]; then
      if [[ $workhours -eq 1 ]]; then
        WS["1"]="work"
        WS["2"]="work"
      else
        WS["2"]="no-discord"
      fi
    elif [[ $mon =~ DP-2 && $mon =~ HDMI-1 ]]; then
      if [[ $workhours -eq 1 ]]; then
        WS["1"]="work"
        WS["2"]="laptop-ext"
        WS["3"]="laptop-ext"
      else
        WS["2"]="no-discord"
      fi
    else
      if [[ $workhours -eq 1 ]]; then
        WS["1"]="work"
        WS["2"]="laptop-ext"
      else
        WS["1"]="laptop"
      fi
    fi
  polybar: |
    MONITOR_MAP["eDP-1"]="laptop"
    MONITOR_MAP["DP-3-2"]="laptop-ext"
    MONITOR_MAP["HDMI-1"]="laptop-ext-secondary"
    DPI_MAP["eDP-1"]="192"
  sway: |
    export MOZ_ENABLE_WAYLAND=1
    export MOZ_USE_XINPUT2=1
  swayidle: |
    SCREEN_ON=1
  gui: |
    QT_AUTO_SCREEN_SCALE_FACTOR="1"
    QT_QPA_PLATFORMTHEME="qt5ct"
  xinitrc: |
    MOZ_X11_EGL="1"
    xinput set-prop 'SynPS/2 Synaptics TouchPad' 'libinput Accel Speed' 0.4
    xinput set-prop 'TPPS/2 Elan TrackPoint' 'libinput Accel Speed' -0.5
  lock: |
    idle_hook="xidlehook_lock_screen_on"
    LOCKER="i3lock"
    OPTS="-i $HOME/.wallpaper -t --clock"
  xorg: |
    DPI=192
  xorg_2: |
    DPI=144
  xorg_3: |
    DPI=144
    mon=$(xrandr --query | grep -oP '\S+\s+connected' | cut -d' ' -f1)
    if [[ $mon =~ DP-3 && $mon =~ HDMI-1 ]]; then
      MONITOR_MAP["DP-3"]="--primary --mode 3840x2160 --rate 120"
      MONITOR_MAP["HDMI-1"]="--above DP-3 --mode 3840x2160"
      MONITOR_MAP["eDP-1"]="--left-of DP-3 --mode 3840x2160"
    elif [[ $mon =~ DP-2 && $mon =~ HDMI-1 ]]; then
      MONITOR_MAP["DP-2"]="--primary --mode 3840x2160"
      MONITOR_MAP["HDMI-1"]="--left-of DP-2 --mode 3840x2160"
      MONITOR_MAP["eDP-1"]="--right-of DP-2 --mode 3840x2160"
    fi
