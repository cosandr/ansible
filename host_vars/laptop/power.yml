---

user_suspend: |
  Type=simple
  Environment=DISPLAY=:0
  Environment=SYSTEMD_SUSPEND=1
  ExecStartPre=-/usr/bin/playerctl pause
  ExecStartPre=-/bin/sh -c 'export XDG_RUNTIME_DIR=/run/user/$$(id -u); systemctl --user stop ws-wait-online.service'
  ExecStartPre=-/bin/sh -c 'export XDG_RUNTIME_DIR=/run/user/$$(id -u); systemctl --user stop dresrv-wait-online.service'
  # Only lock if not locked already
  ExecStart=/bin/sh -c 'pgrep -u andrei -x my-screenlock || /home/andrei/.local/bin/my-screenlock'

user_resume: |
  Type=oneshot
  ExecStart=-/bin/sh -c 'export XDG_RUNTIME_DIR=/run/user/$$(id -u); systemctl --user start ws-wait-online.service'
  ExecStart=-/bin/sh -c 'export XDG_RUNTIME_DIR=/run/user/$$(id -u); systemctl --user start dresrv-wait-online.service'

logind_config: |
  HandlePowerKey=ignore
  HandleSuspendKey=suspend-then-hibernate
  HandleHibernateKey=hibernate
  HandleLidSwitch=suspend-then-hibernate
  HandleLidSwitchExternalPower=suspend
  HandleLidSwitchDocked=ignore
  HandleRebootKey=ignore

systemd_sleep_config: |
  HibernateDelaySec=48h
